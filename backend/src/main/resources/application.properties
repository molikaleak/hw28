spring.application.name=demo

# Database configuration for Render PostgreSQL
# Render provides these environment variables:
# DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD, DB_SSL
# External Database URL: postgresql://user:pass@host:port/dbname

# First, construct a base URL from DB_* variables (Render-style)
render.db.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:postgres}
render.db.username=${DB_USER:postgres}
render.db.password=${DB_PASSWORD:postgres}

# Use DATABASE_* variables if provided, otherwise use render.db.* values
spring.datasource.url=${DATABASE_URL:${render.db.url}}
spring.datasource.username=${DATABASE_USERNAME:${render.db.username}}
spring.datasource.password=${DATABASE_PASSWORD:${render.db.password}}

# Ensure DATABASE_URL has jdbc: prefix if it doesn't already
# This is handled by ensuring Render provides proper JDBC URL or we construct it

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=5
